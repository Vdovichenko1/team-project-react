"use strict";(self.webpackChunkteam_project_react=self.webpackChunkteam_project_react||[]).push([[367],{5367:function(n,t,e){e.r(t),e.d(t,{default:function(){return zn}});var r,i,a,o,s,d,c,l,p,u,x,h,f,m,g,v,Z,w,b,j,y,k,P,S,C,D,F,z,A=e(2982),E=e(1413),W=e(5861),I=e(885),T=e(4687),_=e.n(T),q=e(2791),M=e(2388),Y=e(168),R=e(7691),B=e(4651),H=R.ZP.div(r||(r=(0,Y.Z)(["\n  @media screen and (min-width: 1279.99px) {\n    padding-left: 69px;\n  }\n"]))),L=R.ZP.div(i||(i=(0,Y.Z)(["\n  display: flex;\n  align-items: flex-start;\n  @media screen and (max-width: 768.99px) {\n    flex-direction: column;\n    align-items: center;\n  }\n"]))),$=R.ZP.div(a||(a=(0,Y.Z)(["\n  position: relative;\n  margin-left: 16px;\n\n  @media screen and (min-width: 768.99px) {\n    width: 236px;\n    margin-right: 116px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 288px;\n    margin-left: 0;\n    margin-right: 32px;\n  }\n"]))),G=R.ZP.h2(o||(o=(0,Y.Z)(["\n  font-size: 30px;\n  font-weight: 400;\n  margin-bottom: 8px;\n  @media screen and (min-width: 768.99px) {\n    margin-bottom: 20px;\n  }\n"]))),J=R.ZP.div(s||(s=(0,Y.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  font-size: 18px;\n  font-weight: 700;\n\n  @media screen and (min-width: 768.99px) {\n    top: 50%;\n    transform: translate(-50%, 0);\n  }\n  @media screen and (min-width: 1279.99px) {\n    top: 50%;\n    transform: translate(-50%, 0);\n  }\n"]))),K=R.ZP.div(d||(d=(0,Y.Z)(["\n  margin-top: 25px;\n"]))),N=R.ZP.form(c||(c=(0,Y.Z)(["\n  width: 280px;\n  height: 120px;\n  position: relative;\n  @media screen and (min-width: 768.99px) {\n    display: flex;\n    gap: 16px;\n    width: 336px;\n    height: 50px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    gap: 32px;\n    width: 396px;\n  }\n"]))),O=R.ZP.label(l||(l=(0,Y.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  border-radius: 30px;\n  width: 280px;\n  height: 50px;\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n  }\n"]))),Q=R.ZP.label(p||(p=(0,Y.Z)(["\n  position: absolute;\n  top: 70px;\n  left: 0;\n  background-color: #fff;\n  border-radius: 30px;\n  width: 280px;\n  height: 50px;\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n    top: 0;\n    left: 176px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n    top: 0;\n    left: 214px;\n  }\n"]))),U=R.ZP.select(u||(u=(0,Y.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n  appearance: none;\n  background-color: transparent;\n  height: 50px;\n  width: 100%;\n  border-radius: 30px;\n  padding-left: 20px;\n  padding-right: 20px;\n\n  @media screen and (min-width: 768.99px) {\n    width: 160px;\n    margin-top: 0;\n  }\n  @media screen and (min-width: 1279.99px) {\n    width: 182px;\n    top: 0;\n  }\n"]))),V=(0,R.ZP)(B.qhg)(x||(x=(0,Y.Z)(["\n  width: 24px;\n  height: 18px;\n  position: absolute;\n  top: 50%;\n  right: 0;\n  transform: translate(-20px, -50%);\n  ",":focus + & {\n    transform: translate(-20px, -50%) rotate(180deg);\n  }\n  z-index: 0;\n"])),U),X=R.ZP.div(h||(h=(0,Y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  height: 58px;\n  background-color: #fff;\n  border-radius: 30px;\n  margin-top: 20px;\n"]))),nn=R.ZP.div(f||(f=(0,Y.Z)(["\n  font-weight: 700;\n  font-size: 18px;\n  padding-left: 15px;\n  padding-right: 15px;\n  line-height: 58px;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    color: rgb(36, 204, 167);\n  }\n  @media screen and (min-width: 768.99px) {\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n  @media screen and (min-width: 1279.99px) {\n    padding-left: 28px;\n    padding-right: 28px;\n  }\n"]))),tn=R.ZP.ul(m||(m=(0,Y.Z)(["\n  scrollbar-width: thin;\n  min-height: 100px;\n  @media screen and (min-width: 768.99px) {\n    max-height: calc(100vh - 590px);\n    overflow-y: auto;\n  }\n  @media screen and (min-width: 1279.99px) {\n    max-height: calc(100vh - 360px);\n    overflow-y: auto;\n  }\n"]))),en=R.ZP.li(g||(g=(0,Y.Z)(["\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  line-height: 52px;\n  padding-left: 15px;\n  padding-right: 15px;\n  border-bottom: 1px solid #dcdcdf;\n  box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.6);\n  text-align: left;\n  cursor: pointer;\n  div {\n    margin-left: 5px;\n  }\n  div + div {\n    margin-left: auto;\n  }\n\n  &::before {\n    content: '';\n    display: block;\n    width: 24px;\n    height: 24px;\n    border-radius: 2px;\n    background-color: ",";\n  }\n"])),(function(n){return n.col})),rn=R.ZP.div(v||(v=(0,Y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n  padding-left: 15px;\n  padding-right: 15px;\n"]))),an=e(8268),on=e(3623),sn=e(9434),dn=e(9085),cn=(e(5462),e(2426)),ln=e.n(cn),pn=e(4164),un=R.ZP.div(Z||(Z=(0,Y.Z)(["\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n"]))),xn=R.ZP.div(w||(w=(0,Y.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 10;\n  transform: translate(-50%, -50%);\n  background-color: #ddd;\n  width: 280px;\n  @media screen and (min-width: 767.99px) {\n    width: 360px;\n  }\n"]))),hn=R.ZP.div(b||(b=(0,Y.Z)(["\n  color: #333;\n  font-size: 14px;\n  font-weight: 700;\n  width: 240px;\n  padding: 8px;\n"]))),fn=R.ZP.div(j||(j=(0,Y.Z)([""]))),mn=R.ZP.div(y||(y=(0,Y.Z)(["\n  display: none;\n  background-color: #fff;\n  @media screen and (min-width: 767.99px) {\n    display: flex;\n  }\n"]))),gn=R.ZP.span(k||(k=(0,Y.Z)(["\n  display: inline-block;\n  padding: 8px;\n  font-weight: 500;\n  background-color: #fff;\n  text-align: ",";\n  &:nth-child(2) {\n    margin-left: 12px;\n  }\n  &:nth-child(3) {\n    margin-left: auto;\n  }\n"])),(function(n){return n.position})),vn=R.ZP.div(P||(P=(0,Y.Z)(["\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #222;\n\n  @media screen and (min-width: 767.99px) {\n    flex-direction: row;\n    border: none;\n    width: 100%;\n  }\n"]))),Zn=R.ZP.span(S||(S=(0,Y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 8px;\n  font-size: 12px;\n  border-bottom: 1px solid #dcdcdf;\n  box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.6);\n\n  @media screen and (min-width: 767.99px) {\n    display: inline-block;\n    text-align: ",";\n    &:last-child {\n      margin-left: auto;\n    }\n  }\n"])),(function(n){return n.position})),wn=R.ZP.span(C||(C=(0,Y.Z)(["\n  text-align: left;\n  @media screen and (min-width: 767.99px) {\n    display: none;\n  }\n"]))),bn=R.ZP.span(D||(D=(0,Y.Z)(["\n  text-align: right;\n"]))),jn=R.ZP.span(F||(F=(0,Y.Z)(["\n  text-align: right;\n  color: #ff6596;\n"]))),yn=R.ZP.span(z||(z=(0,Y.Z)(["\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n  font-weight: 700;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.6);\n  border: none;\n  border-radius: 50%;\n"]))),kn=e(3329);function Pn(n){var t=n.showinfo,e=n.setShowinfo;return(0,pn.createPortal)((0,kn.jsx)(un,{children:(0,kn.jsxs)(xn,{children:[(0,kn.jsxs)(hn,{children:[" ",t.caption]}),(0,kn.jsxs)(fn,{children:[(0,kn.jsxs)(mn,{children:[(0,kn.jsx)(gn,{position:"left",children:"Date"}),(0,kn.jsx)(gn,{position:"left",children:"Comment"}),(0,kn.jsx)(gn,{children:"Sum"})]}),(0,kn.jsx)("div",{style:{maxHeight:"60vh",overflow:"auto"},children:t.data.map((function(n){return(0,kn.jsxs)(vn,{children:[(0,kn.jsxs)(Zn,{position:"left",children:[(0,kn.jsx)(wn,{children:"Date"}),(0,kn.jsx)(bn,{children:ln()(n.transactionDate).format("DD.MM.YY")})]}),(0,kn.jsxs)(Zn,{position:"left",children:[(0,kn.jsx)(wn,{children:"Comment"}),(0,kn.jsx)(bn,{children:n.comment})]}),(0,kn.jsxs)(Zn,{position:"right",children:[(0,kn.jsx)(wn,{children:"Sum"}),(0,kn.jsx)(jn,{children:-n.amount})]})]},n.id)}))})]}),(0,kn.jsx)(yn,{onClick:function(){return e({showinfo:!1,caption:"",data:[]})},type:"button",children:"x"})]})}),document.querySelector("#portal"))}var Sn=e(9245),Cn=e(9615),Dn=e(9013);an.kL.register(an.qi,an.u);var Fn=["#fed057","#FFD8D0","#FF6596","#C5BAFF","#6E78E8","#81E1FF","#00AD84","#4A56E2","#FD9498","#A6A6A6"],zn=function(){var n=(0,q.useState)(null),t=(0,I.Z)(n,2),e=t[0],r=t[1],i=(0,q.useState)(null),a=(0,I.Z)(i,2),o=a[0],s=a[1],d=(0,q.useState)({showinfo:!1,caption:"",data:[]}),c=(0,I.Z)(d,2),l=c[0],p=c[1],u=(0,q.useRef)(),x=(0,q.useRef)(),h=(0,sn.v9)((function(n){return n.finance.transactions})),f=new Set(h.map((function(n){return n.transactionDate.slice(0,4)}))),m=new Set(h.map((function(n){return n.transactionDate.slice(5,7)}))),g=null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).length,v={labels:null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n){return n.name})),datasets:[{label:"expense",data:null===e||void 0===e?void 0:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n){return-n.total})),backgroundColor:Fn.slice(0,g),borderColor:Fn.slice(0,g),borderWidth:1}]};function Z(n){return w.apply(this,arguments)}function w(){return(w=(0,W.Z)(_().mark((function n(t){var e,i,a;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),""!==u.current.value||""===x.current.value){n.next=3;break}return n.abrupt("return");case 3:if(""!==u.current.value||""!==x.current.value){n.next=14;break}return n.prev=4,n.next=7,M.Z.get("/api/transactions-summary");case 7:e=n.sent,r(e.data),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),console.log(n.t0);case 14:if(""===u.current.value||""!==x.current.value){n.next=25;break}return n.prev=15,n.next=18,M.Z.get("/api/transactions-summary?year=".concat(u.current.value));case 18:i=n.sent,r(i.data),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(15),console.log(n.t1);case 25:if(""===u.current.value||""===x.current.value){n.next=36;break}return n.prev=26,n.next=29,M.Z.get("/api/transactions-summary?month=".concat(x.current.value,"&year=").concat(u.current.value));case 29:a=n.sent,r(a.data),n.next=36;break;case 33:n.prev=33,n.t2=n.catch(26),console.log(n.t2);case 36:case"end":return n.stop()}}),n,null,[[4,11],[15,22],[26,33]])})))).apply(this,arguments)}function b(n){var t=n.currentTarget.dataset.name,e=o.find((function(n){return n.name===t})).id,r=h.filter((function(n){return n.categoryId===e})),i="Exspenses by category "+t;""!==u.current.value&&(r=r.filter((function(n){return n.transactionDate.slice(0,4)===u.current.value})),i=i+" for a period: year "+u.current.value),""!==u.current.value&&""!==x.current.value&&(r=r.filter((function(n){return n.transactionDate.slice(5,7)===x.current.value})),i=i+" month "+x.current.value),p({showinfo:!0,caption:i,data:r})}return(0,q.useEffect)((function(){function n(){return(n=(0,W.Z)(_().mark((function n(){var t,e;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,M.Z.get("/api/transactions-summary");case 3:return t=n.sent,n.next=6,M.Z.get("/api/transaction-categories");case 6:return e=n.sent,n.abrupt("return",{summary:t.data,categories:e.data});case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then((function(n){var t=n.summary,e=n.categories;r(t),s(e)}))}),[]),(0,kn.jsx)(H,{children:e?(0,kn.jsxs)(kn.Fragment,{children:[(0,kn.jsx)(Dn.d,{children:(0,kn.jsx)(G,{children:"Statistic"})}),(0,kn.jsxs)(L,{children:[(0,kn.jsxs)($,{children:[(0,kn.jsx)(Cn.i,{children:(0,kn.jsx)(G,{children:"Statistic"})}),(0,kn.jsxs)(J,{children:["\u20b4 ",e.periodTotal]}),(0,kn.jsx)(on.$I,{options:{cutout:"70%",animation:{animateScale:!0}},data:v})]}),(0,kn.jsxs)(K,{children:[(0,kn.jsxs)(N,{onSubmit:Z,children:[(0,kn.jsxs)(O,{children:[(0,kn.jsxs)(U,{name:"year",ref:u,onChange:Z,children:[(0,kn.jsx)("option",{value:"",children:"Year"}),Array.from(f).map((function(n){return(0,kn.jsx)("option",{value:n,children:n},n)}))]}),(0,kn.jsx)(V,{})]}),(0,kn.jsxs)(Q,{children:[(0,kn.jsxs)(U,{name:"month",ref:x,onChange:Z,children:[(0,kn.jsx)("option",{value:"",children:"Month"}),Array.from(m).map((function(n){return(0,kn.jsx)("option",{value:n,children:n},n)}))]}),(0,kn.jsx)(V,{})]})]}),(0,kn.jsxs)(X,{children:[(0,kn.jsx)(nn,{"data-sort":"=",onClick:function(n){var t=n.currentTarget;"="===t.dataset.sort||"d"===t.dataset.sort?(t.dataset.sort="i",r((function(n){return(0,E.Z)((0,E.Z)({},n),{},{categoriesSummary:(0,A.Z)(n.categoriesSummary.sort((function(n,t){return n.name>t.name?1:-1})))})}))):"i"===t.dataset.sort&&(t.dataset.sort="d",r((function(n){return(0,E.Z)((0,E.Z)({},n),{},{categoriesSummary:(0,A.Z)(n.categoriesSummary.sort((function(n,t){return n.name<t.name?1:-1})))})})))},title:"click to sort",children:"Category"}),(0,kn.jsx)(nn,{"data-sort":"=",onClick:function(n){var t=n.currentTarget;"="===t.dataset.sort||"d"===t.dataset.sort?(t.dataset.sort="i",r((function(n){return(0,E.Z)((0,E.Z)({},n),{},{categoriesSummary:(0,A.Z)(n.categoriesSummary.sort((function(n,t){return-n.total>-t.total?1:-1})))})}))):"i"===t.dataset.sort&&(t.dataset.sort="d",r((function(n){return(0,E.Z)((0,E.Z)({},n),{},{categoriesSummary:(0,A.Z)(n.categoriesSummary.sort((function(n,t){return-n.total<-t.total?1:-1})))})})))},title:"click to sort",children:"Sum"})]}),(0,kn.jsx)(tn,{children:e.categoriesSummary.filter((function(n){return n.total<0})).map((function(n,t){var e=n.name,r=n.total;return(0,kn.jsxs)(en,{col:Fn[t],onClick:b,"data-name":e,title:"click for detailed information",children:[(0,kn.jsx)("div",{children:e})," ",(0,kn.jsx)("div",{children:-r})]},e)}))}),(0,kn.jsxs)(rn,{children:[(0,kn.jsx)("div",{style:{fontWeight:700},children:"Expenses:"}),(0,kn.jsx)("div",{style:{fontWeight:700,color:"#FF6596"},children:-e.expenseSummary})]}),(0,kn.jsxs)(rn,{children:[(0,kn.jsx)("div",{style:{fontWeight:700},children:"Income:"}),(0,kn.jsx)("div",{style:{fontWeight:700,color:"#24CCA7"},children:e.incomeSummary})]})]}),(0,kn.jsx)(dn.Ix,{}),l.showinfo&&(0,kn.jsx)(Pn,{showinfo:l,setShowinfo:p})]})]}):(0,kn.jsx)(Sn.a,{})})}}}]);
//# sourceMappingURL=367.5a1b23ac.chunk.js.map